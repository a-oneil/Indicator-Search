<script>
  function GenerateSummary(button) {
    // Set the desired URL
    var targetURL = '/indicator/summarize/{{ indicator.id }}';

    // Navigate to the specified URL
    window.location.href = targetURL;

    // Change button color on click
    button.style.backgroundColor = '#28ba50'; // Change to the desired color

    // Set a timeout to revert the button color after 1 second (1000 milliseconds)
    setTimeout(function () {
      button.style.backgroundColor = ''; // Revert to the original color
      button.innerHTML = '<i class="fa-solid fa-comment"></i> Generate Summary'; // Revert to the original button text
    }, 500);
  }
</script>

{% if indicator.summary %}

<div class="ui segment">
  <p class="ui small header">
    <i class="fa-solid fa-robot"></i> Indicator Summary
  </p>
  <div class="content" style="word-wrap: break-word;white-space: pre-line">{{indicator.summary}}</div>
</div>
{% elif indicator.summary|open_ai_enabled %}
<div class="ui segment">
  <p class="ui small header">
    <i class="fa-solid fa-robot"></i> Indicator Summary</i>

  </p>
  <button class="small ui icon blue left ui button"
    style="position:absolute; top: 0px; right:-3.5px; width: 150px; border-radius: 0px 4px 0px 4px;"
    onclick="GenerateSummary(this)">
    <i class="fa-solid fa-comment"></i> Generate Summary
  </button>
</div>
{% endif %}